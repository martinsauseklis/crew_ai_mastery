# =====================================
# ELITE SOFTWARE DEVELOPMENT CREW - MAIN CONFIGURATION
# =====================================
# This is the main crew configuration that orchestrates the entire development process
# Stack: Next.js, Node.js, Prisma, PostgreSQL, NextAuth, Jest, Playwright
# Quality Standard: Top 1% professional development practices
# =====================================

crew_name: "Elite Software Development Crew"
crew_version: "1.0.0"
description: "A world-class software development team for building production-ready web applications"

# =====================================
# CREW SETTINGS
# =====================================

settings:
  # Process type: sequential ensures tasks run in order, hierarchical allows manager delegation
  process: "sequential"

  # Verbose output for detailed logging
  verbose: true

  # Memory settings for agent learning
  memory: true

  # Allow agents to remember context between executions
  embedder:
    provider: "openai"
    config:
      model: "text-embedding-3-small"

  # Maximum iterations for task refinement
  max_iterations: 3

  # Quality gates - crew will not proceed if these are not met
  quality_gates:
    - name: "security_check"
      description: "No critical security vulnerabilities"
      required: true

    - name: "test_coverage"
      description: "Minimum 80% test coverage"
      threshold: 80
      required: true

    - name: "accessibility_score"
      description: "Minimum Lighthouse accessibility score"
      threshold: 95
      required: true

    - name: "performance_score"
      description: "Minimum Lighthouse performance score"
      threshold: 90
      required: true

    - name: "documentation_complete"
      description: "All required documentation present"
      required: true

# =====================================
# TECHNOLOGY STACK CONFIGURATION
# =====================================

tech_stack:
  frontend:
    framework: "Next.js 14+"
    features:
      - "App Router"
      - "React Server Components"
      - "Server Actions"
    language: "TypeScript"
    styling: "Tailwind CSS / CSS Modules"
    state_management: "React Context / Zustand"
    data_fetching: "SWR / TanStack Query"
    forms: "React Hook Form"

  backend:
    runtime: "Node.js"
    framework: "Next.js API Routes"
    orm: "Prisma"
    database: "PostgreSQL"
    validation: "Zod"
    authentication: "NextAuth.js"

  testing:
    unit: "Jest"
    integration: "Jest + Supertest"
    e2e: "Playwright"
    component: "React Testing Library"

  devops:
    containerization: "Docker + Docker Compose"
    ci_cd: "GitHub Actions"
    linting: "ESLint"
    formatting: "Prettier"
    git_hooks: "Husky + lint-staged"

  quality_standards:
    - "SOLID principles"
    - "Clean Architecture"
    - "WCAG 2.1 AA accessibility"
    - "OWASP Top 10 security"
    - "Semantic versioning"
    - "Conventional commits"

# =====================================
# AGENT ASSIGNMENTS
# =====================================

agents:
  - product_strategist
  - system_architect
  - uiux_designer
  - backend_engineer
  - frontend_engineer
  - devops_engineer
  - qa_engineer
  - documentation_specialist
  - tech_lead_reviewer

# =====================================
# TASK WORKFLOW (Execution Order)
# =====================================

tasks:
  # Phase 1: Discovery & Planning
  - task_product_requirements
  - task_system_architecture

  # Phase 2: Design
  - task_uiux_design

  # Phase 3: Backend Implementation
  - task_backend_implementation

  # Phase 4: Frontend Implementation
  - task_frontend_implementation

  # Phase 5: DevOps & Automation
  - task_devops_setup

  # Phase 6: Quality Assurance
  - task_qa_testing

  # Phase 7: Bug Fixes & Refinement (parallel where possible)
  - task_backend_refinement
  - task_frontend_refinement

  # Phase 8: Documentation
  - task_comprehensive_documentation

  # Phase 9: Final Review
  - task_final_quality_review

# =====================================
# OUTPUT STRUCTURE
# =====================================

output_structure:
  base_directory: "output"

  directories:
    - "docs"           # All documentation
    - "app"            # Next.js app directory
    - "components"     # React components
    - "lib"            # Utilities and helpers
    - "prisma"         # Database schema and migrations
    - "tests"          # Test files
    - "scripts"        # Automation scripts
    - "public"         # Static assets
    - ".github"        # CI/CD workflows

  required_files:
    - "README.md"
    - "package.json"
    - "tsconfig.json"
    - "next.config.js"
    - ".env.example"
    - "docker-compose.yml"
    - ".eslintrc.json"
    - ".prettierrc"
    - "jest.config.js"
    - "playwright.config.ts"

# =====================================
# COLLABORATION RULES
# =====================================

collaboration_rules:
  - name: "Clear Handoffs"
    description: "Each agent must produce complete outputs before passing to next agent"

  - name: "No Placeholders"
    description: "All code must be production-ready, no TODO comments or placeholder implementations"

  - name: "Documentation First"
    description: "Architecture and design decisions must be documented before implementation"

  - name: "Test Coverage"
    description: "All business logic must have corresponding tests"

  - name: "Security Review"
    description: "All code must pass security checks before moving forward"

  - name: "Accessibility Priority"
    description: "WCAG 2.1 AA compliance is mandatory, not optional"

  - name: "Performance Budget"
    description: "Lighthouse performance score must be >90"

  - name: "Code Review"
    description: "Technical lead must approve all deliverables before completion"

  - name: "Iterative Refinement"
    description: "Agents can iterate on their work based on QA feedback"

  - name: "Knowledge Sharing"
    description: "All decisions and learnings must be documented for team knowledge"

# =====================================
# ERROR HANDLING & RECOVERY
# =====================================

error_handling:
  - scenario: "Task failure"
    action: "Retry with feedback from failure"
    max_retries: 2

  - scenario: "Quality gate failure"
    action: "Route to appropriate specialist for fixes"
    escalate_after: 2

  - scenario: "Dependency missing"
    action: "Request missing information from user"
    blocking: true

  - scenario: "Conflicting requirements"
    action: "Escalate to Product Strategist for clarification"
    blocking: true

# =====================================
# SUCCESS CRITERIA (Project Completion)
# =====================================

success_criteria:
  product:
    - "All user stories from PRD implemented and tested"
    - "All acceptance criteria met"
    - "MVP features complete and functional"

  technical:
    - "Clean architecture with proper separation of concerns"
    - "SOLID principles followed throughout"
    - "No critical or high-severity security issues"
    - "Test coverage >80%"
    - "Lighthouse accessibility score >95"
    - "Lighthouse performance score >90"

  quality:
    - "All quality gates passed"
    - "Code review approved by Tech Lead"
    - "Documentation complete and accurate"
    - "No critical bugs in production"

  operational:
    - "One-command local setup works"
    - "CI/CD pipeline runs successfully"
    - "Development environment is reproducible"
    - "Deployment guide is tested and accurate"

# =====================================
# DELIVERY CHECKLIST
# =====================================

delivery_checklist:
  documentation:
    - "README.md with quick start"
    - "SETUP.md with environment setup"
    - "ARCHITECTURE.md with system design"
    - "API.md with endpoint documentation"
    - "COMPONENTS.md with component library"
    - "DEPLOYMENT.md with deployment guide"
    - "TROUBLESHOOTING.md with common issues"

  code:
    - "Complete Next.js application"
    - "Prisma schema and migrations"
    - "All components and pages"
    - "API routes with validation"
    - "Authentication and authorization"
    - "Comprehensive test suite"

  infrastructure:
    - "docker-compose.yml for local dev"
    - "CI/CD pipeline configuration"
    - "Environment configuration files"
    - "Database seed scripts"

  quality:
    - "QA report with test results"
    - "Accessibility audit report"
    - "Performance audit report"
    - "Security checklist completed"
    - "Final review and sign-off"
